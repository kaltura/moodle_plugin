if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/moodle-atto_kalturamedia-button/moodle-atto_kalturamedia-button.js']) {
   __coverage__['build/moodle-atto_kalturamedia-button/moodle-atto_kalturamedia-button.js'] = {"path":"build/moodle-atto_kalturamedia-button/moodle-atto_kalturamedia-button.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":43},"end":{"line":1,"column":62}}},"2":{"name":"(anonymous_2)","line":50,"loc":{"start":{"line":50,"column":21},"end":{"line":50,"column":32}}},"3":{"name":"(anonymous_3)","line":59,"loc":{"start":{"line":59,"column":23},"end":{"line":59,"column":34}}},"4":{"name":"(anonymous_4)","line":86,"loc":{"start":{"line":86,"column":23},"end":{"line":86,"column":34}}},"5":{"name":"(anonymous_5)","line":99,"loc":{"start":{"line":99,"column":22},"end":{"line":99,"column":33}}},"6":{"name":"(anonymous_6)","line":115,"loc":{"start":{"line":115,"column":32},"end":{"line":115,"column":50}}},"7":{"name":"(anonymous_7)","line":119,"loc":{"start":{"line":119,"column":19},"end":{"line":119,"column":40}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":163,"column":61}},"2":{"start":{"line":36,"column":0},"end":{"line":44,"column":6}},"3":{"start":{"line":46,"column":0},"end":{"line":160,"column":2}},"4":{"start":{"line":51,"column":12},"end":{"line":57,"column":13}},"5":{"start":{"line":52,"column":16},"end":{"line":56,"column":19}},"6":{"start":{"line":60,"column":12},"end":{"line":60,"column":69}},"7":{"start":{"line":61,"column":12},"end":{"line":63,"column":13}},"8":{"start":{"line":62,"column":16},"end":{"line":62,"column":23}},"9":{"start":{"line":65,"column":12},"end":{"line":65,"column":25}},"10":{"start":{"line":66,"column":12},"end":{"line":66,"column":24}},"11":{"start":{"line":67,"column":12},"end":{"line":67,"column":98}},"12":{"start":{"line":68,"column":12},"end":{"line":68,"column":94}},"13":{"start":{"line":70,"column":12},"end":{"line":70,"column":155}},"14":{"start":{"line":71,"column":12},"end":{"line":71,"column":161}},"15":{"start":{"line":73,"column":12},"end":{"line":73,"column":64}},"16":{"start":{"line":74,"column":12},"end":{"line":74,"column":63}},"17":{"start":{"line":75,"column":12},"end":{"line":75,"column":199}},"18":{"start":{"line":77,"column":12},"end":{"line":77,"column":35}},"19":{"start":{"line":79,"column":12},"end":{"line":81,"column":13}},"20":{"start":{"line":80,"column":16},"end":{"line":80,"column":34}},"21":{"start":{"line":83,"column":12},"end":{"line":83,"column":41}},"22":{"start":{"line":88,"column":12},"end":{"line":94,"column":34}},"23":{"start":{"line":95,"column":12},"end":{"line":96,"column":46}},"24":{"start":{"line":100,"column":12},"end":{"line":100,"column":25}},"25":{"start":{"line":101,"column":12},"end":{"line":101,"column":81}},"26":{"start":{"line":102,"column":12},"end":{"line":102,"column":49}},"27":{"start":{"line":103,"column":12},"end":{"line":110,"column":13}},"28":{"start":{"line":105,"column":16},"end":{"line":109,"column":17}},"29":{"start":{"line":107,"column":20},"end":{"line":107,"column":54}},"30":{"start":{"line":108,"column":20},"end":{"line":108,"column":40}},"31":{"start":{"line":112,"column":12},"end":{"line":112,"column":28}},"32":{"start":{"line":116,"column":12},"end":{"line":116,"column":54}},"33":{"start":{"line":120,"column":12},"end":{"line":120,"column":37}},"34":{"start":{"line":121,"column":12},"end":{"line":121,"column":61}},"35":{"start":{"line":122,"column":12},"end":{"line":122,"column":53}},"36":{"start":{"line":123,"column":12},"end":{"line":123,"column":36}},"37":{"start":{"line":124,"column":12},"end":{"line":124,"column":33}},"38":{"start":{"line":126,"column":12},"end":{"line":126,"column":133}},"39":{"start":{"line":128,"column":12},"end":{"line":128,"column":36}},"40":{"start":{"line":129,"column":12},"end":{"line":129,"column":54}},"41":{"start":{"line":130,"column":12},"end":{"line":130,"column":52}},"42":{"start":{"line":131,"column":12},"end":{"line":131,"column":31}},"43":{"start":{"line":132,"column":12},"end":{"line":132,"column":37}}},"branchMap":{"1":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":12},"end":{"line":51,"column":12}},{"start":{"line":51,"column":12},"end":{"line":51,"column":12}}]},"2":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":12},"end":{"line":61,"column":12}},{"start":{"line":61,"column":12},"end":{"line":61,"column":12}}]},"3":{"line":67,"type":"cond-expr","locations":[{"start":{"line":67,"column":66},"end":{"line":67,"column":83}},{"start":{"line":67,"column":86},"end":{"line":67,"column":97}}]},"4":{"line":68,"type":"cond-expr","locations":[{"start":{"line":68,"column":64},"end":{"line":68,"column":80}},{"start":{"line":68,"column":83},"end":{"line":68,"column":93}}]},"5":{"line":70,"type":"cond-expr","locations":[{"start":{"line":70,"column":44},"end":{"line":70,"column":61}},{"start":{"line":70,"column":64},"end":{"line":70,"column":154}}]},"6":{"line":70,"type":"cond-expr","locations":[{"start":{"line":70,"column":103},"end":{"line":70,"column":139}},{"start":{"line":70,"column":142},"end":{"line":70,"column":154}}]},"7":{"line":71,"type":"cond-expr","locations":[{"start":{"line":71,"column":46},"end":{"line":71,"column":64}},{"start":{"line":71,"column":67},"end":{"line":71,"column":160}}]},"8":{"line":71,"type":"cond-expr","locations":[{"start":{"line":71,"column":107},"end":{"line":71,"column":144}},{"start":{"line":71,"column":147},"end":{"line":71,"column":160}}]},"9":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":12},"end":{"line":79,"column":12}},{"start":{"line":79,"column":12},"end":{"line":79,"column":12}}]},"10":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":16},"end":{"line":105,"column":16}},{"start":{"line":105,"column":16},"end":{"line":105,"column":16}}]}},"code":["(function () { YUI.add('moodle-atto_kalturamedia-button', function (Y, NAME) {","","// This file is part of Moodle - http://moodle.org/\r","//\r","// Moodle is free software: you can redistribute it and/or modify\r","// it under the terms of the GNU General Public License as published by\r","// the Free Software Foundation, either version 3 of the License, or\r","// (at your option) any later version.\r","//\r","// Moodle is distributed in the hope that it will be useful,\r","// but WITHOUT ANY WARRANTY; without even the implied warranty of\r","// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r","// GNU General Public License for more details.\r","//\r","// You should have received a copy of the GNU General Public License\r","// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r","\r","/*\r"," * @package    atto_kalturamedia\r"," * @copyright  2Kaltura\r"," * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r"," */\r","\r","/**\r"," * @module moodle-atto_kalturamedia-button\r"," */\r","\r","/**\r"," * Atto text editor kalturamedia plugin.\r"," *\r"," * @namespace M.atto_kalturamedia\r"," * @class button\r"," * @extends M.editor_atto.EditorPlugin\r"," */\r","\r","var COMPONENTNAME = 'atto_kalturamedia',\r","    CSS = {\r","        URLINPUT: 'atto_kalturamedia_urlentry',\r","        NAMEINPUT: 'atto_kalturamedia_nameentry'\r","    },\r","    SELECTORS = {\r","        URLINPUT: '.' + CSS.URLINPUT,\r","        NAMEINPUT: '.' + CSS.NAMEINPUT\r","    };\r","\r","Y.namespace('M.atto_kalturamedia').Button = Y.Base.create('button', Y.M.editor_atto.EditorPlugin, [], {\r","        _currentSelection: null,\r","        embedWindow: null,\r","\r","        initializer: function() {\r","            if (this.get('enabled')) {\r","                this.addButton({\r","                    icon: 'icon',\r","                    iconComponent: COMPONENTNAME,\r","                    callback: this._kalturamedia\r","                });\r","            }\r","        },\r","        _kalturamedia: function() {\r","            this._currentSelection = this.get('host').getSelection();\r","            if (this._currentSelection === false) {\r","                return;\r","            }\r","\r","            var w = 1200;\r","            var h = 700;\r","            var dualScreenLeft = window.screenLeft != undefined ? window.screenLeft : screen.left;\r","            var dualScreenTop = window.screenTop != undefined ? window.screenTop : screen.top;\r","\r","            var width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width;\r","            var height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height;\r","\r","            var left = ((width / 2) - (w / 2)) + dualScreenLeft;\r","            var top = ((height / 2) - (h / 2)) + dualScreenTop;\r","            var newWindow = window.open(this._getIframeURL(), M.util.get_string(\"browse_and_embed\", COMPONENTNAME), 'scrollbars=no, width=' + w + ', height=' + h + ', top=' + top + ', left=' + left);\r","\r","            window.buttonJs = this;\r","\r","            if (window.focus) {\r","                newWindow.focus();\r","            }\r","\r","            this.embedWindow = newWindow;\r","        },\r","\r","        _getIframeURL: function() {\r","\r","            var args = Y.mix({\r","                    elementid: this.get('host').get('elementid'),\r","                    contextid: this.get('contextid'),\r","                    height: '600px',\r","                    width: '1112px'\r","                },\r","                this.get('area'));\r","            return M.cfg.wwwroot + '/lib/editor/atto/plugins/kalturamedia/ltibrowse_container.php?' +\r","                Y.QueryString.stringify(args);\r","        },\r","\r","        _getCourseId: function() {\r","            var courseId;\r","            var bodyClasses = document.getElementsByTagName('body')[0].className;\r","            var classes = bodyClasses.split(' ');\r","            for(i in classes)\r","            {\r","                if(classes[i].indexOf('course-') > -1)\r","                {\r","                    var parts = classes[i].split('-');\r","                    courseId = parts[1];\r","                }\r","            }\r","\r","            return courseId;\r","        },\r","\r","        _removeProtocolFromUrl: function(fullUrl) {\r","            return fullUrl.replace(/^https?:\\/\\//,'');\r","        },\r","\r","        embedItem: function(what, data) {\r","            var sourceUrl = data.url;\r","            var url = this._removeProtocolFromUrl(sourceUrl);\r","            var parser = document.createElement('a');\r","            parser.href = sourceUrl;\r","            url += parser.search;\r","\r","            var content = '<a href=\"http://'+url+'\">tinymce-kalturamedia-embed||'+data.title+'||'+data.width+'||'+data.height+'</a>';\r","\r","            host = this.get('host');\r","            host.setSelection(this._currentSelection);\r","            host.insertContentAtFocusPoint(content);\r","            this.markUpdated();\r","            this.embedWindow.close();\r","        }\r","\r","    } , {\r","        ATTRS: {\r","            /**\r","             * Whether to enable the button.\r","             */\r","            enabled: {\r","                value: false\r","            },\r","            /**\r","             * The contextid to use when generating this preview.\r","             *\r","             * @attribute contextid\r","             * @type String\r","             */\r","            contextid: {\r","                value: null\r","            },\r","\r","            /**\r","             * The KAF URI, as configured in Kaltura's plugin settings.\r","             */\r","            kafuri: {\r","                value: null\r","            }\r","        }}\r",");\r","","","}, '@VERSION@', {\"requires\": [\"moodle-editor_atto-plugin\"]});","","}());"]};
}
var __cov_HjZTx8fE2j7fahookso83Q = __coverage__['build/moodle-atto_kalturamedia-button/moodle-atto_kalturamedia-button.js'];
__cov_HjZTx8fE2j7fahookso83Q.s['1']++;YUI.add('moodle-atto_kalturamedia-button',function(Y,NAME){__cov_HjZTx8fE2j7fahookso83Q.f['1']++;__cov_HjZTx8fE2j7fahookso83Q.s['2']++;var COMPONENTNAME='atto_kalturamedia',CSS={URLINPUT:'atto_kalturamedia_urlentry',NAMEINPUT:'atto_kalturamedia_nameentry'},SELECTORS={URLINPUT:'.'+CSS.URLINPUT,NAMEINPUT:'.'+CSS.NAMEINPUT};__cov_HjZTx8fE2j7fahookso83Q.s['3']++;Y.namespace('M.atto_kalturamedia').Button=Y.Base.create('button',Y.M.editor_atto.EditorPlugin,[],{_currentSelection:null,embedWindow:null,initializer:function(){__cov_HjZTx8fE2j7fahookso83Q.f['2']++;__cov_HjZTx8fE2j7fahookso83Q.s['4']++;if(this.get('enabled')){__cov_HjZTx8fE2j7fahookso83Q.b['1'][0]++;__cov_HjZTx8fE2j7fahookso83Q.s['5']++;this.addButton({icon:'icon',iconComponent:COMPONENTNAME,callback:this._kalturamedia});}else{__cov_HjZTx8fE2j7fahookso83Q.b['1'][1]++;}},_kalturamedia:function(){__cov_HjZTx8fE2j7fahookso83Q.f['3']++;__cov_HjZTx8fE2j7fahookso83Q.s['6']++;this._currentSelection=this.get('host').getSelection();__cov_HjZTx8fE2j7fahookso83Q.s['7']++;if(this._currentSelection===false){__cov_HjZTx8fE2j7fahookso83Q.b['2'][0]++;__cov_HjZTx8fE2j7fahookso83Q.s['8']++;return;}else{__cov_HjZTx8fE2j7fahookso83Q.b['2'][1]++;}__cov_HjZTx8fE2j7fahookso83Q.s['9']++;var w=1200;__cov_HjZTx8fE2j7fahookso83Q.s['10']++;var h=700;__cov_HjZTx8fE2j7fahookso83Q.s['11']++;var dualScreenLeft=window.screenLeft!=undefined?(__cov_HjZTx8fE2j7fahookso83Q.b['3'][0]++,window.screenLeft):(__cov_HjZTx8fE2j7fahookso83Q.b['3'][1]++,screen.left);__cov_HjZTx8fE2j7fahookso83Q.s['12']++;var dualScreenTop=window.screenTop!=undefined?(__cov_HjZTx8fE2j7fahookso83Q.b['4'][0]++,window.screenTop):(__cov_HjZTx8fE2j7fahookso83Q.b['4'][1]++,screen.top);__cov_HjZTx8fE2j7fahookso83Q.s['13']++;var width=window.innerWidth?(__cov_HjZTx8fE2j7fahookso83Q.b['5'][0]++,window.innerWidth):(__cov_HjZTx8fE2j7fahookso83Q.b['5'][1]++,document.documentElement.clientWidth?(__cov_HjZTx8fE2j7fahookso83Q.b['6'][0]++,document.documentElement.clientWidth):(__cov_HjZTx8fE2j7fahookso83Q.b['6'][1]++,screen.width));__cov_HjZTx8fE2j7fahookso83Q.s['14']++;var height=window.innerHeight?(__cov_HjZTx8fE2j7fahookso83Q.b['7'][0]++,window.innerHeight):(__cov_HjZTx8fE2j7fahookso83Q.b['7'][1]++,document.documentElement.clientHeight?(__cov_HjZTx8fE2j7fahookso83Q.b['8'][0]++,document.documentElement.clientHeight):(__cov_HjZTx8fE2j7fahookso83Q.b['8'][1]++,screen.height));__cov_HjZTx8fE2j7fahookso83Q.s['15']++;var left=width/2-w/2+dualScreenLeft;__cov_HjZTx8fE2j7fahookso83Q.s['16']++;var top=height/2-h/2+dualScreenTop;__cov_HjZTx8fE2j7fahookso83Q.s['17']++;var newWindow=window.open(this._getIframeURL(),M.util.get_string('browse_and_embed',COMPONENTNAME),'scrollbars=no, width='+w+', height='+h+', top='+top+', left='+left);__cov_HjZTx8fE2j7fahookso83Q.s['18']++;window.buttonJs=this;__cov_HjZTx8fE2j7fahookso83Q.s['19']++;if(window.focus){__cov_HjZTx8fE2j7fahookso83Q.b['9'][0]++;__cov_HjZTx8fE2j7fahookso83Q.s['20']++;newWindow.focus();}else{__cov_HjZTx8fE2j7fahookso83Q.b['9'][1]++;}__cov_HjZTx8fE2j7fahookso83Q.s['21']++;this.embedWindow=newWindow;},_getIframeURL:function(){__cov_HjZTx8fE2j7fahookso83Q.f['4']++;__cov_HjZTx8fE2j7fahookso83Q.s['22']++;var args=Y.mix({elementid:this.get('host').get('elementid'),contextid:this.get('contextid'),height:'600px',width:'1112px'},this.get('area'));__cov_HjZTx8fE2j7fahookso83Q.s['23']++;return M.cfg.wwwroot+'/lib/editor/atto/plugins/kalturamedia/ltibrowse_container.php?'+Y.QueryString.stringify(args);},_getCourseId:function(){__cov_HjZTx8fE2j7fahookso83Q.f['5']++;__cov_HjZTx8fE2j7fahookso83Q.s['24']++;var courseId;__cov_HjZTx8fE2j7fahookso83Q.s['25']++;var bodyClasses=document.getElementsByTagName('body')[0].className;__cov_HjZTx8fE2j7fahookso83Q.s['26']++;var classes=bodyClasses.split(' ');__cov_HjZTx8fE2j7fahookso83Q.s['27']++;for(i in classes){__cov_HjZTx8fE2j7fahookso83Q.s['28']++;if(classes[i].indexOf('course-')>-1){__cov_HjZTx8fE2j7fahookso83Q.b['10'][0]++;__cov_HjZTx8fE2j7fahookso83Q.s['29']++;var parts=classes[i].split('-');__cov_HjZTx8fE2j7fahookso83Q.s['30']++;courseId=parts[1];}else{__cov_HjZTx8fE2j7fahookso83Q.b['10'][1]++;}}__cov_HjZTx8fE2j7fahookso83Q.s['31']++;return courseId;},_removeProtocolFromUrl:function(fullUrl){__cov_HjZTx8fE2j7fahookso83Q.f['6']++;__cov_HjZTx8fE2j7fahookso83Q.s['32']++;return fullUrl.replace(/^https?:\/\//,'');},embedItem:function(what,data){__cov_HjZTx8fE2j7fahookso83Q.f['7']++;__cov_HjZTx8fE2j7fahookso83Q.s['33']++;var sourceUrl=data.url;__cov_HjZTx8fE2j7fahookso83Q.s['34']++;var url=this._removeProtocolFromUrl(sourceUrl);__cov_HjZTx8fE2j7fahookso83Q.s['35']++;var parser=document.createElement('a');__cov_HjZTx8fE2j7fahookso83Q.s['36']++;parser.href=sourceUrl;__cov_HjZTx8fE2j7fahookso83Q.s['37']++;url+=parser.search;__cov_HjZTx8fE2j7fahookso83Q.s['38']++;var content='<a href="http://'+url+'">tinymce-kalturamedia-embed||'+data.title+'||'+data.width+'||'+data.height+'</a>';__cov_HjZTx8fE2j7fahookso83Q.s['39']++;host=this.get('host');__cov_HjZTx8fE2j7fahookso83Q.s['40']++;host.setSelection(this._currentSelection);__cov_HjZTx8fE2j7fahookso83Q.s['41']++;host.insertContentAtFocusPoint(content);__cov_HjZTx8fE2j7fahookso83Q.s['42']++;this.markUpdated();__cov_HjZTx8fE2j7fahookso83Q.s['43']++;this.embedWindow.close();}},{ATTRS:{enabled:{value:false},contextid:{value:null},kafuri:{value:null}}});},'@VERSION@',{'requires':['moodle-editor_atto-plugin']});
